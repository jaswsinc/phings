<?xml version="1.0" encoding="UTF-8" ?>

  <project name="validate">

    <!-- ============================================  -->
    <!-- Property validation. -->
    <!-- ============================================  -->

    <target name="-validate" hidden="true">
      <fail unless="project_title" message="Missing `project_title` in properties file!" />
      <fail unless="project_owner" message="Missing `project_owner` in properties file!" />
      <fail unless="project_slug" message="Missing `project_slug` in properties file!" />

      <fail unless="_project_text_domain" message="Failed to generate `_project_text_domain`." />

      <fail unless="project_namespace" message="Missing `project_namespace` in properties file!" />
      <fail unless="project_sub_namespace" message="Missing `project_sub_namespace` in properties file!" />

      <if>
        <not>
          <isset property="project_other_phar_fileset_exclusions" />
        </not>
        <then>
          <property name="project_other_phar_fileset_exclusions" value="" />
        </then>
      </if>
      <if>
        <not>
          <isset property="project_other_zip_tgz_fileset_exclusions" />
        </not>
        <then>
          <property name="project_other_zip_tgz_fileset_exclusions" value="" />
        </then>
      </if>

      <if>
        <and>
          <not>
            <isset property="is_lite" />
          </not>
          <istrue value="${_is_lite_applicable}" />
        </and>
        <then>
          <fail unless="project_lite_title" message="Missing `project_lite_title` in properties file!" />
          <fail unless="project_lite_slug" message="Missing `project_lite_slug` in properties file!" />

          <fail unless="project_lite_namespace" message="Missing `project_lite_namespace` in properties file!" />
          <fail unless="project_lite_sub_namespace" message="Missing `project_lite_sub_namespace` in properties file!" />

          <if>
            <not>
              <isset property="project_lite_other_phar_fileset_exclusions" />
            </not>
            <then>
              <property name="project_lite_other_phar_fileset_exclusions" value="" />
            </then>
          </if>
          <if>
            <not>
              <isset property="project_lite_other_zip_tgz_fileset_exclusions" />
            </not>
            <then>
              <property name="project_lite_other_zip_tgz_fileset_exclusions" value="" />
            </then>
          </if>
          <if>
            <not>
              <isset property="project_lite_text_domain_regex_replacement_pattern" />
            </not>
            <then>
              <property name="project_lite_text_domain_regex_replacement_pattern" value="" />
            </then>
          </if>
          <if>
            <not>
              <isset property="project_lite_alter_namespace_in_other_files_pattern" />
            </not>
            <then>
              <property name="project_lite_alter_namespace_in_other_files_pattern" value="" />
            </then>
          </if>
        </then>
      </if>

      <fail unless="project_version" message="Missing `project_version` in properties file!" />

      <fail unless="project_php_required_version" message="Missing `project_php_required_version` in properties file!" />
      <fail unless="project_php_tested_up_to_version" message="Missing `project_php_tested_up_to_version` in properties file!" />

      <if>
        <and>
          <istrue value="${_is_wp_theme_plugin}" />
        </and>
        <then>
          <fail unless="project_wp_required_version" message="Missing `project_wp_required_version` in properties file!" />
          <fail unless="project_wp_tested_up_to_version" message="Missing `project_wp_tested_up_to_version` in properties file!" />
          <if>
            <and>
              <istrue value="${_is_wp_sharks_core_theme_plugin}" />
            </and>
            <then>
              <fail unless="project_wp_sharks_core_required_version" message="Missing `project_wp_sharks_core_required_version` in properties file!" />
              <fail unless="project_wp_sharks_core_tested_up_to_version" message="Missing `project_wp_sharks_core_tested_up_to_version` in properties file!" />
              <if>
                <not>
                  <isset property="project_wp_sharks_core_max_compatible_version" />
                </not>
                <then>
                  <property name="project_wp_sharks_core_max_compatible_version" value="" />
                </then>
              </if>
            </then>
          </if>
        </then>
      </if>

      <echo msg="Build properties valid; nice work!" />

      <echo msg="------------------------------------" />
    </target>

  </project>
